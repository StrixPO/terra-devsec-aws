<!--
SECURITY MODEL (UI):
- If "Encrypt with password" is enabled, encryption happens in-browser (AES-GCM).
- The server never sees the password or plaintext (zero-trust goal).
- Losing the password means content is unrecoverable.
-->

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="PsstBin - Encrypted and ephemeral pastebin for your secrets."
    />
    <title>PsstBin</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>üîê PsstBin<sup>2.0</sup></h1>

        <p class="subtitle">Encrypted. Ephemeral. Yours.</p>
      </header>

      <main>
        <!-- Create Paste Section -->
        <section>
          <h2>Create Paste</h2>
          <form
            id="create-form"
            onsubmit="
              event.preventDefault();
              createPaste();
            "
          >
            <div class="form-group">
              <label for="create-content">Your secret:</label>
              <textarea
                id="create-content"
                placeholder="Enter your secret..."
                required
              ></textarea>
            </div>

            <!--
            <div class="form-group">
              <label for="create-id">Paste ID (optional):</label>
              <input
                type="text"
                id="create-id"
                placeholder="Leave blank for random"
              />
            </div>
            -->

            <div class="form-group">
              <label for="create-expiry">Expiry:</label>
              <select id="create-expiry">
                <option value="300">5 minutes</option>
                <option value="1800">30 minutes</option>
                <option value="3600" selected>1 hour (recommended)</option>
                <option value="21600">6 hours</option>
                <option value="86400">1 day</option>
                <option value="604800">7 days</option>
              </select>
            </div>

            <div class="form-group checkbox">
              <input
                type="checkbox"
                id="create-encrypt"
                onchange="togglePasswordField()"
              />
              <label for="create-encrypt"
                >üîê Encrypt with password (optional)</label
              >
            </div>

            <div class="form-group" id="password-wrapper" style="display: none">
              <label for="encryption-password">Encryption password:</label>
              <input
                type="password"
                id="encryption-password"
                placeholder="Strong password (min 8 characters)"
                minlength="8"
              />
              <small style="color: #888; display: block; margin-top: 0.3rem">
                Your content will be encrypted in your browser before sending to
                the server.
              </small>
            </div>

            <button type="submit">Create</button>
          </form>
          <pre id="create-response"></pre>
        </section>

        <!-- Get Paste Sectin -->
        <section>
          <h2>Get Paste</h2>
          <form
            id="get-form"
            onsubmit="
              event.preventDefault();
              getPaste();
            "
          >
            <div class="form-group">
              <label for="get-id">Paste ID:</label>
              <input
                type="text"
                id="get-id"
                placeholder="e.g., abc123"
                required
              />
            </div>

            <!-- Password field (shown only if needed) -->
            <div
              class="form-group"
              id="get-password-wrapper"
              style="display: none"
            >
              <label for="get-password">üîê Decryption Password:</label>
              <input
                type="password"
                id="get-password"
                placeholder="Enter password to decrypt"
              />
              <small style="color: #888; display: block; margin-top: 0.3rem">
                This paste is encrypted. Enter the password to view it.
              </small>
            </div>

            <button type="submit">Fetch</button>
          </form>

          <pre id="get-response"></pre>
        </section>
      </main>
    </div>
    <footer>
      <center>
        ‚ö†Ô∏è Heads up: This site may not work correctly in Brave browser due to
        aggressive privacy blocking. For best experience, use Chrome, Firefox,
        or Safari.
      </center>
    </footer>

    <script src="script.js"></script>
    <script>
      function togglePasswordField() {
        const checkbox = document.getElementById("create-encrypt");
        const passwordWrapper = document.getElementById("password-wrapper");
        passwordWrapper.style.display = checkbox.checked ? "block" : "none";
      }
    </script>
  </body>
</html>
